syntax = "proto3";

package shortener;

option go_package = "github.com/serg2014/shortener/cmd/shortener/proto";

/*
#r.Post("/", handlers.CreateURL(a))
#r.Get("/{key}", handlers.GetURL(a))
#r.Post("/api/shorten", handlers.CreateURLJson(a))
#r.Post("/api/shorten/batch", handlers.CreateURLBatch(a))
#r.Get("/api/user/urls", handlers.GetUserURLS(a))
*/

message InternalStatsRequest {}
message InternalStatsResponse {
    uint32 urls = 1;
    uint32 users = 2;
}

message PingRequest {}
message PingResponse {}

message DeleteUserURLSRequest {
    repeated string shorts = 1;
}
message DeleteUserURLSResponse {}

message GetURLRequest {
    string short = 1;
}
message GetURLResponse {
    string url = 1;
}

service ShortenerService {
  rpc InternalStats(InternalStatsRequest) returns (InternalStatsResponse);
  rpc Ping(PingRequest) returns (PingResponse);
  rpc DeleteUserURLS(DeleteUserURLSRequest) returns (DeleteUserURLSResponse);
  rpc GetURL(GetURLRequest) returns (GetURLResponse);
}